{
  "id": 44859710,
  "lang": "ru",
  "summary": "```markdown\nTCP-клиент может сам к себе подключиться.  \nЗапустите:\n\n```sh\nwhile true; do telnet 127.0.0.1 50000; done\n```\n\nПолучите череду *Connection refused*, а потом внезапно:\n\n```\nConnected to 127.0.0.1.\ntest1\ntest1\n```\n\nСервер не запускали, но `netstat` показывает:\n\n```\ntcp  0  0 127.0.0.1:50000  127.0.0.1:50000  ESTABLISHED\n```\n\n`tcpdump` фиксирует полноценное трёхстороннее рукопожатие.\n\nПочему?  \nПри подключении ядро выбирает случайный **эфемерный порт** из диапазона (например, 32768-61000). Если выпадет тот же номер, что и целевой (50000), клиент шлёт SYN самому себе. TCP допускает *simultaneous open* (RFC 793), поэтому машина состояний переходит:\n\nCLOSED → SYN-SENT → SYN-RECEIVED → ESTABLISHED\n\nи соединение устанавливается без внешнего сервера. Linux выдаёт эфемерные порты последовательно, поэтому такое совпадение рано или поздно происходит.\n```",
  "inputHash": "00fa330e2084c6cdc9eb05ff24334ade99a69074e5d42360dcb2a8185a58eb54",
  "model": "moonshotai/kimi-k2:free",
  "createdISO": "2025-08-11T05:33:39.407Z"
}