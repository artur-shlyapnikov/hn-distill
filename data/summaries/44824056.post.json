{
  "id": 44824056,
  "lang": "ru",
  "summary": "Я листал соцсети и наткнулся на toot Энди P с трюком:\n\nwidth: calc(infinity * 1px);\nheight: calc(infinity * 1px);\n\nПодумал: отличный тест на пределы. Если отдать браузеру бесконечность через ключевое слово infinity, он всё равно зажмет до максимума — можно понять верхнюю планку.\n\nСделал див с width/height: calc(infinity * 1px), обнулил отступы, проверил в Safari, Chrome и Firefox (Nightly) на macOS — и началось странное.\n\n- Safari: около 33,554,428 px по ширине/высоте\n- Chrome: около 33,554,400 px\n- Firefox: высота схлопывается до межстрочного (например, 19.2 px при normal, 16 px при line-height: 1), ширина — вычислено ~17,895,700, но в раскладке ~8,947,840 (ровно половина минус 10)\n\nSafari/Chrome почти упираются в 2^25 - 1 (33,554,431), но чуть ниже. Почему именно так — загадка. Firefox же ведет себя особенно: высота с “бесконечностью” игнорируется и падает к строке, ширина делится пополам в layout.\n\nДальше я попробовал font-size: calc(infinity * 1px):\n\n- Safari: 100,000 px\n- Chrome: 10,000 px\n- Firefox: вычислено 3.40282e38 (макс для 32-бит float), но в раскладке шрифт ~2,400 px при normal; при line-height: 1 высота блока вдруг раздувается до ~8.9 млн. То же при переносе стилей на body.\n\nВывод: у Safari/Chrome жесткие десятичные лимиты для font-size (100k и 10k). У Firefox — вычислительно “бесконечность” как float, но реально рендерится ограниченный размер и странная связь с line-height.\n\nПроверил line-height: calc(infinity * 1px):\n\n- Safari: ~33,554,428\n- Chrome: ~33,554,400\n- Firefox: вычислено ~17,895,700, в раскладке ~8,947,840\n\nИтоговые наблюдения:\n- Safari/Chrome для размеров элементов/line-height ограничивают около 2^25 - 1; для font-size — вручную заданные пороги (10k/100k).\n- Firefox: несогласованность вычисленного и реального значения; высота может схлопываться к строке, ширины/line-height делятся пополам, сильная зависимость от line-height.\n\nЕсли кто знает первопричины (история движков, типы хранилищ, квантизация, внутренние лимиты раскладки/скролла/композитинга) — расскажите в комментариях или постом с трекбеком.",
  "inputHash": "e5d41b62333f0dfb7351e99754315be068e8f88cebeccfb0bd64f201aed1592a",
  "model": "openrouter/horizon-beta",
  "createdISO": "2025-08-07T13:43:39.296Z"
}