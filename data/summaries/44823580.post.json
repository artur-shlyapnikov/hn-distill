{
  "id": 44823580,
  "lang": "ru",
  "summary": "Этот пост — часть 5 серии «Попробую использовать систему AArch64 как десктоп».\n\n1. AArch64 desktop: day one\n2. AArch64 desktop: day two\n3. AArch64 desktop: last day\n4. Arm desktop: 2025 attempt, part one\n5. Arm desktop: emulation\n\nКогда используешь не x86, быстро появляется вопрос: «А запустит ли он [x86‑64 только бинарник]?». Разберемся как это сделать.\n\n### Программный стек\n\nПо запросу «как запускать x86‑64 на Fedora/Arm» обычно попадаешь на документацию Asahi. Полезно для понимания, но с ядром на 4K‑страницах можно пропустить muvm и binfmt-dispatcher.\n\nНужно только FEX-emu — он подтянет всё остальное. Чтобы не мешал QEMU, рекомендую удалить qemu-static-* (dnf remove qemu-static-*) — тогда для чужой архитектуры будет использоваться один FEX-emu.\n\n#### Проверка эмуляции\n\nУстановка FEX-emu ставит Fedora/x86‑64 rootfs. Проверяем:\n\n- uname -m → aarch64\n- FEXBash \"uname -m\" → монтируется default.erofs, вывод x86_64\n\nЕсли есть ошибки, проверьте /usr/lib/binfmt.d/ — там должны быть только FEX-x86_64.conf и FEX-x86.conf.\n\n### Geekbench 6\n\nЗапустил Geekbench 6. CPU определяется как Neoverse N1 (80 ядер), наборы инструкций: sse2/3, avx/avx2, aesni и т.д. Результаты слабые:\n- Single core: 459\n- Multi core: 4110\nУровень Intel Atom 2021 года; Ryzen 5 3600 сильно быстрее.\n\n### Можно ли ускорить?\n\nРазработчики FEX-Emu подсказали, что ускорение зависит от возможностей Arm‑CPU:\n- Крипто: AES, CRC, SHA, PMULL\n- TSO: TSO bit (Apple), LRCPC/LRCPC2, LSE2\n- Флаги: AFP, FlagM/FlagM2\n- Атомики: LSE\n- Прочее: FCMA, FRINTTS, RPRES, SVE/bitperm\n- Будущее: RCPC3, CSSC, RAND\n\nAmpere Altra (Neoverse‑N1, Arm v8.2, 2019) поддерживает только часть: весь криптоблок + LSE и LRCPC.\n\n### Советы и трюки\n\nДоп. настройки FEX-emu, дающие прирост:\n- Снизить точность x86 FPU\n- Отключить TSO\n\nПример ~/.fex-emu/Config.json:\n- RootFS: default.erofs\n- X87ReducedPrecision: 1\n- TSOEnabled: 0\n- ThunksDB: GL=1, Vulkan=1\n\nFactorio заметно ускорился. Geekbench после изменений иногда падает.\n\n### Steam\n\nСтавим Steam из RPM Fusion non-free (x86_64/i686). Устанавливаем без зависимостей и игнора архитектуры:\n- sudo rpm -i steam-…i686.rpm --nodeps --ignorearch\nЗапуск под эмуляцией:\n- FEXBash steam\nВ итоге появляется окно Steam.\n\n### Factorio\n\nЯ зависим от Factorio. На Ampere Altra без твиков FEX — неиграбельно в 3440×1440: с 60/60 на Ryzen 5 3600 до 8–11/59.5. После твиков стало терпимее: в зонах с роботами 16–25 FPS, местами почти 60/60 при сильном зуме на пустые области. Можно попытаться пройти за ~100 часов.\n\n### Забавная история\n\nПару дней назад @chenlin3 добавил Ninja в систему сборки EDK2…",
  "inputHash": "88331371104fd863ec2c2493445e56955c8db46836e88b3e53e7038ff098b5a7",
  "model": "openrouter/horizon-beta",
  "createdISO": "2025-08-07T13:46:13.919Z"
}